{% extends 'home/header.html' %}

{% load static %}


{% block head %}
<link rel="stylesheet" href="{% static 'home/css/requests.css' %}">
<link rel="stylesheet" href="{% static 'home/css/request-form.css' %}">
{% endblock %}


{% block content %}
<main class="container mt-4">

  <div class="mb-10">
    <h2> Galaxy Australia CellRanger Access Request </h2>
    <small>
      <a href="/request">
        <span class="material-icons">arrow_back</span>
        Back to support menu
      </a>
    </small>
  </div>

  <p class="lead">
    Cell Ranger is a set of analysis pipelines, from 10X Genomics, that process Chromium single cell data to align reads, generate feature-barcode matrices, perform clustering and other secondary analysis.
  </p>

  <p>
    The following Cell Ranger tools are available on Galaxy Australia:
  </p>

  <p>
    <code>cellranger mkfastq</code>
    demultiplexes raw base call (BCL) files generated by Illumina sequencers into FASTQ files. It is a wrapper around Illumina's bcl2fastq, with additional features that are specific to 10x Genomics libraries and a simplified sample sheet format.
  </p>

  <p>
    <code>cellranger count</code>
    takes FASTQ files from cellranger mkfastq and performs alignment, filtering, barcode counting, and UMI counting. It uses the Chromium cellular barcodes to generate feature-barcode matrices, determine clusters, and perform gene expression analysis. The count pipeline can take input from multiple sequencing runs on the same GEM well. cellranger count also processes Feature Barcode data alongside Gene Expression reads.
  </p>

  <p>
    <code>cellranger mkgft</code>
    a simple utility to filter genes based on their key-value pairs in the GTF attribute column.
  </p>

  <p class="mb-10">
    Cell Ranger is available on Galaxy Australia for Australian researchers. Please apply for access, using your institutional email.
  </p>

  <form method="post">

    {% csrf_token %}

    {{ form.non_field_errors }}

    {% include 'home/requests/access/snippets/personal-details-fields.html' %}

    <div class="row mb-10">
      <div class="col-sm-12 mb-5">
        <p>
          The
          <a
            href="https://www.10xgenomics.com/end-user-software-license-agreement"
            target="_blank"
          >
            CellRanger End User Licence Agreement
          </a>
          must be read and acknowledged prior to access being provisioned.
        </p>

        {% include 'home/requests/access/snippets/agree-terms-modal.html' %}

      </div>

      <div class="col-sm-12">
        <p>
          The use of Cell Ranger is for academic or non-commercial research
          purposes. You must agree to this prior to access being provisioned.
        </p>
        {{ form.agree_usage.errors }}
        <input
          class="form-check-input"
          id="usageInput"
          name="agree_usage"
          type="checkbox"
          required
          {% if form.agree_usage.value %}checked{% endif %}
        />
        <label for="usageInput" class="form-check-label">I agree to only use CellRanger for academic or non-commercial research purposes</label>
      </div>
    </div>

    <div class="container mb-10">
      <b>Privacy Collection Notice</b>: by completing this form you agree that your
      responses will be provided to the Australian BioCommons and Galaxy
      Australia and will be used solely for the purposes of determining
      suitability for access to the Australian CellRanger Service. Your
      responses will be protected against unauthorised access and use; providing
      your name is required to enable any follow ups. For more information,
      please see the
      <a href="https://www.biocommons.org.au/privacy/">
        BioCommons Privacy Statement</a>.
    </div>

    <div class="row mb-10">
      <div class="col text-center">
        <button class='ga-btn' type="submit"> Submit </button>
      </div>
    </div>
  </form>

</main>
{% endblock %}


{% block script %}
<script src="{% static 'home/js/forms.js' %}"></script>
<script>
  function showAcceptLicense(acceptLicenseBtn) {
    console.log("Button:")
    console.log(acceptLicenseBtn);
    $(acceptLicenseBtn).siblings('.form-check').show();
  }
</script>
{% endblock %}


{% block onload %}
{% endblock %}
